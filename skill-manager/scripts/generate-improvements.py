#!/usr/bin/env python3
"""
Improvement Generator - Generate improvement plans from feedback
"""

import argparse
from datetime import datetime
from pathlib import Path


def generate_improvements(skill_name: str, feedback_file: str, output: str):
    """Generate improvement plan from feedback"""
    
    print(f"ğŸ¯ ç”Ÿæˆæ”¹è¿›å»ºè®®ï¼š{skill_name}")
    
    improvement_plan = f"""# {skill_name} æ”¹è¿›è®¡åˆ’

**ç”Ÿæˆæ—¶é—´:** {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}  
**åé¦ˆæ¥æº:** {feedback_file}  
**æ”¹è¿›å‘¨æœŸ:** 2026-03 (æœˆåº¦)

---

## ğŸ“Š æ”¹è¿›æ¦‚è§ˆ

| ä¼˜å…ˆçº§ | æ•°é‡ | é¢„è®¡å·¥ä½œé‡ | å®Œæˆæ—¶é—´ |
|--------|------|------------|----------|
| **P0 ä¸¥é‡** | 0 | 0 å¤© | æœ¬å‘¨ |
| **P1 é‡è¦** | 0 | 0 å¤© | æœ¬æœˆ |
| **P2 ä¸€èˆ¬** | 0 | 0 å¤© | ä¸‹æœˆ |
| **P3 å»ºè®®** | 0 | 0 å¤© | å¾…å®š |
| **æ€»è®¡** | 0 | 0 å¤© | - |

---

## ğŸ”´ P0 ä¸¥é‡é—®é¢˜ï¼ˆ24 å°æ—¶å†…ä¿®å¤ï¼‰

### é—®é¢˜ç¤ºä¾‹

#### é—®é¢˜ #1: [å¾…å¡«å†™]
**åé¦ˆæ¥æº:** åé¦ˆæ”¶é›†.md#åé¦ˆ#1  
**å½±å“èŒƒå›´:** æ‰€æœ‰ç”¨æˆ·  
**å·¥ä½œé‡:** 1 å¤©  

**é—®é¢˜æè¿°:**


**è§£å†³æ–¹æ¡ˆ:**


**éªŒæ”¶æ ‡å‡†:**
- [ ] é—®é¢˜ä¿®å¤
- [ ] æ·»åŠ æµ‹è¯•
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] ç”¨æˆ·éªŒè¯

---

## ğŸŸ¡ P1 é‡è¦é—®é¢˜ï¼ˆæœ¬å‘¨å†…å®Œæˆï¼‰

### é—®é¢˜ç¤ºä¾‹

#### é—®é¢˜ #1: [å¾…å¡«å†™]
**åé¦ˆæ¥æº:** åé¦ˆæ”¶é›†.md#åé¦ˆ#2  
**å½±å“èŒƒå›´:** éƒ¨åˆ†ç”¨æˆ·  
**å·¥ä½œé‡:** 2 å¤©  

**é—®é¢˜æè¿°:**


**è§£å†³æ–¹æ¡ˆ:**


**éªŒæ”¶æ ‡å‡†:**
- [ ] åŠŸèƒ½å®ç°
- [ ] æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°

---

## ğŸŸ¢ P2 ä¸€èˆ¬é—®é¢˜ï¼ˆæœ¬æœˆå†…å®Œæˆï¼‰

### æ”¹è¿›ç¤ºä¾‹

#### æ”¹è¿› #1: [å¾…å¡«å†™]
**åé¦ˆæ¥æº:** åé¦ˆæ”¶é›†.md#å»ºè®®#1  
**å·¥ä½œé‡:** 1 å¤©  

**æ”¹è¿›æè¿°:**


**å®ç°æ–¹æ¡ˆ:**


**é¢„æœŸæ”¶ç›Š:**
- æ•ˆç‡æå‡ï¼š50%
- ç”¨æˆ·ä½“éªŒï¼šæ˜¾è‘—æ”¹å–„

---

## ğŸ“‹ æ”¹è¿›æ¸…å•

### æœ¬å‘¨å®Œæˆ
- [ ] P0 é—®é¢˜ #1
- [ ] P1 é—®é¢˜ #1

### æœ¬æœˆå®Œæˆ
- [ ] P1 é—®é¢˜ #2
- [ ] P2 é—®é¢˜ #1
- [ ] P2 é—®é¢˜ #2

### ä¸‹æœˆè®¡åˆ’
- [ ] P2 é—®é¢˜ #3
- [ ] P3 å»ºè®® #1

---

## ğŸ“ˆ æ”¹è¿›è¿½è¸ª

### è¿›åº¦çœ‹æ¿

```
å¾…å¤„ç†    è¿›è¡Œä¸­    æµ‹è¯•ä¸­    å·²å®Œæˆ
  â–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ       â–ˆ        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  (4)      (2)      (1)       (6)
```

### å˜æ›´è®°å½•

| æ—¥æœŸ | æ”¹è¿›é¡¹ | ç±»å‹ | çŠ¶æ€ |
|------|--------|------|------|
| 2026-02-27 | åˆå§‹ç‰ˆæœ¬ | - | âœ… |

---

## ğŸ“ æ”¹è¿›æ—¥å¿—

### 2026-02-27
- åˆ›å»ºæ”¹è¿›è®¡åˆ’
- æ”¶é›†ç”¨æˆ·åé¦ˆ 0 æ¡
- å®Œæˆæ”¹è¿› 0 é¡¹

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [åé¦ˆæ”¶é›†](åé¦ˆæ”¶é›†.md)
- [ç‰ˆæœ¬è®¡åˆ’](ç‰ˆæœ¬è®¡åˆ’.md)
- [æµ‹è¯•æŠ¥å‘Š](æµ‹è¯•æŠ¥å‘Š.md)
"""
    
    output_path = Path(output)
    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(improvement_plan)
    
    print(f"âœ… æ”¹è¿›è®¡åˆ’å·²ç”Ÿæˆï¼š{output_path}")
    print(f"\nğŸ“‹ ä¸‹ä¸€æ­¥:")
    print(f"1. è¯„ä¼°æ”¹è¿›ä¼˜å…ˆçº§")
    print(f"2. åˆ†é…æ”¹è¿›ä»»åŠ¡")
    print(f"3. å®æ–½æ”¹è¿›")
    print(f"4. æµ‹è¯•éªŒè¯")
    print(f"5. å‘å¸ƒæ–°ç‰ˆæœ¬")


def main():
    parser = argparse.ArgumentParser(description='Generate improvement plan')
    parser.add_argument('--skill', '-s', required=True, help='Skill name')
    parser.add_argument('--feedback', '-f', required=True, help='Feedback file')
    parser.add_argument('--output', '-o', default='æ”¹è¿›è®¡åˆ’.md', help='Output file')
    
    args = parser.parse_args()
    
    generate_improvements(args.skill, args.feedback, args.output)


if __name__ == '__main__':
    main()
